prometheus-2.47.0.linux-amd64/
prometheus-2.47.0.linux-amd64/console_libraries/
prometheus-2.47.0.linux-amd64/console_libraries/menu.lib
prometheus-2.47.0.linux-amd64/console_libraries/prom.lib
prometheus-2.47.0.linux-amd64/prometheus.yml
prometheus-2.47.0.linux-amd64/promtool
prometheus-2.47.0.linux-amd64/LICENSE
prometheus-2.47.0.linux-amd64/prometheus
prometheus-2.47.0.linux-amd64/NOTICE
prometheus-2.47.0.linux-amd64/consoles/
prometheus-2.47.0.linux-amd64/consoles/prometheus-overview.html
prometheus-2.47.0.linux-amd64/consoles/node.html
prometheus-2.47.0.linux-amd64/consoles/node-cpu.html
prometheus-2.47.0.linux-amd64/consoles/index.html.example
prometheus-2.47.0.linux-amd64/consoles/prometheus.html
prometheus-2.47.0.linux-amd64/consoles/node-overview.html
prometheus-2.47.0.linux-amd64/consoles/node-disk.html
node_exporter-1.6.1.linux-amd64/
node_exporter-1.6.1.linux-amd64/NOTICE
node_exporter-1.6.1.linux-amd64/node_exporter
node_exporter-1.6.1.linux-amd64/LICENSE
Bringing machine 'server-prometheus' up with 'virtualbox' provider...
Bringing machine 'client1-nodeexporters' up with 'virtualbox' provider...
Bringing machine 'client2-nodeexporters' up with 'virtualbox' provider...
==> server-prometheus: Importing base box 'centos/8'...
[KProgress: 20%[KProgress: 40%[KProgress: 50%[KProgress: 70%[KProgress: 90%[K==> server-prometheus: Matching MAC address for NAT networking...
==> server-prometheus: Checking if box 'centos/8' version '2011.0' is up to date...
==> server-prometheus: Setting the name of the VM: server-prometheus
==> server-prometheus: Clearing any previously set network interfaces...
==> server-prometheus: Preparing network interfaces based on configuration...
    server-prometheus: Adapter 1: nat
    server-prometheus: Adapter 2: hostonly
==> server-prometheus: Forwarding ports...
    server-prometheus: 22 (guest) => 2222 (host) (adapter 1)
==> server-prometheus: Running 'pre-boot' VM customizations...
==> server-prometheus: Booting VM...
==> server-prometheus: Waiting for machine to boot. This may take a few minutes...
    server-prometheus: SSH address: 127.0.0.1:2222
    server-prometheus: SSH username: vagrant
    server-prometheus: SSH auth method: private key
    server-prometheus: 
    server-prometheus: Vagrant insecure key detected. Vagrant will automatically replace
    server-prometheus: this with a newly generated keypair for better security.
    server-prometheus: 
    server-prometheus: Inserting generated public key within guest...
    server-prometheus: Removing insecure key from the guest if it's present...
    server-prometheus: Key inserted! Disconnecting and reconnecting using new SSH key...
==> server-prometheus: Machine booted and ready!
==> server-prometheus: Checking for guest additions in VM...
    server-prometheus: No guest additions were detected on the base box for this VM! Guest
    server-prometheus: additions are required for forwarded ports, shared folders, host only
    server-prometheus: networking, and more. If SSH fails on this machine, please install
    server-prometheus: the guest additions and repackage the box to continue.
    server-prometheus: 
    server-prometheus: This is not an error message; everything may continue to work properly,
    server-prometheus: in which case you may ignore this message.
==> server-prometheus: Setting hostname...
==> server-prometheus: Configuring and enabling network interfaces...
==> server-prometheus: Rsyncing folder: /home/sincere/vagrantdocs/lesson21/vm/ => /vagrant
==> server-prometheus: Running provisioner: shell...
    server-prometheus: Running: inline script
==> client1-nodeexporters: Importing base box 'centos/8'...
[KProgress: 20%[KProgress: 40%[KProgress: 50%[KProgress: 70%[KProgress: 90%[K==> client1-nodeexporters: Matching MAC address for NAT networking...
==> client1-nodeexporters: Checking if box 'centos/8' version '2011.0' is up to date...
==> client1-nodeexporters: Setting the name of the VM: client1-nodeexporters
==> client1-nodeexporters: Fixed port collision for 22 => 2222. Now on port 2200.
==> client1-nodeexporters: Clearing any previously set network interfaces...
==> client1-nodeexporters: Preparing network interfaces based on configuration...
    client1-nodeexporters: Adapter 1: nat
    client1-nodeexporters: Adapter 2: hostonly
==> client1-nodeexporters: Forwarding ports...
    client1-nodeexporters: 22 (guest) => 2200 (host) (adapter 1)
==> client1-nodeexporters: Running 'pre-boot' VM customizations...
==> client1-nodeexporters: Booting VM...
==> client1-nodeexporters: Waiting for machine to boot. This may take a few minutes...
    client1-nodeexporters: SSH address: 127.0.0.1:2200
    client1-nodeexporters: SSH username: vagrant
    client1-nodeexporters: SSH auth method: private key
    client1-nodeexporters: 
    client1-nodeexporters: Vagrant insecure key detected. Vagrant will automatically replace
    client1-nodeexporters: this with a newly generated keypair for better security.
    client1-nodeexporters: 
    client1-nodeexporters: Inserting generated public key within guest...
    client1-nodeexporters: Removing insecure key from the guest if it's present...
    client1-nodeexporters: Key inserted! Disconnecting and reconnecting using new SSH key...
==> client1-nodeexporters: Machine booted and ready!
==> client1-nodeexporters: Checking for guest additions in VM...
    client1-nodeexporters: No guest additions were detected on the base box for this VM! Guest
    client1-nodeexporters: additions are required for forwarded ports, shared folders, host only
    client1-nodeexporters: networking, and more. If SSH fails on this machine, please install
    client1-nodeexporters: the guest additions and repackage the box to continue.
    client1-nodeexporters: 
    client1-nodeexporters: This is not an error message; everything may continue to work properly,
    client1-nodeexporters: in which case you may ignore this message.
==> client1-nodeexporters: Setting hostname...
==> client1-nodeexporters: Configuring and enabling network interfaces...
==> client1-nodeexporters: Rsyncing folder: /home/sincere/vagrantdocs/lesson21/vm/ => /vagrant
==> client1-nodeexporters: Running provisioner: shell...
    client1-nodeexporters: Running: inline script
==> client2-nodeexporters: Importing base box 'centos/8'...
[KProgress: 20%[KProgress: 40%[KProgress: 50%[KProgress: 70%[KProgress: 90%[K==> client2-nodeexporters: Matching MAC address for NAT networking...
==> client2-nodeexporters: Checking if box 'centos/8' version '2011.0' is up to date...
==> client2-nodeexporters: Setting the name of the VM: client2-nodeexporters
==> client2-nodeexporters: Fixed port collision for 22 => 2222. Now on port 2201.
==> client2-nodeexporters: Clearing any previously set network interfaces...
==> client2-nodeexporters: Preparing network interfaces based on configuration...
    client2-nodeexporters: Adapter 1: nat
    client2-nodeexporters: Adapter 2: hostonly
==> client2-nodeexporters: Forwarding ports...
    client2-nodeexporters: 22 (guest) => 2201 (host) (adapter 1)
==> client2-nodeexporters: Running 'pre-boot' VM customizations...
==> client2-nodeexporters: Booting VM...
==> client2-nodeexporters: Waiting for machine to boot. This may take a few minutes...
    client2-nodeexporters: SSH address: 127.0.0.1:2201
    client2-nodeexporters: SSH username: vagrant
    client2-nodeexporters: SSH auth method: private key
    client2-nodeexporters: 
    client2-nodeexporters: Vagrant insecure key detected. Vagrant will automatically replace
    client2-nodeexporters: this with a newly generated keypair for better security.
    client2-nodeexporters: 
    client2-nodeexporters: Inserting generated public key within guest...
    client2-nodeexporters: Removing insecure key from the guest if it's present...
    client2-nodeexporters: Key inserted! Disconnecting and reconnecting using new SSH key...
==> client2-nodeexporters: Machine booted and ready!
==> client2-nodeexporters: Checking for guest additions in VM...
    client2-nodeexporters: No guest additions were detected on the base box for this VM! Guest
    client2-nodeexporters: additions are required for forwarded ports, shared folders, host only
    client2-nodeexporters: networking, and more. If SSH fails on this machine, please install
    client2-nodeexporters: the guest additions and repackage the box to continue.
    client2-nodeexporters: 
    client2-nodeexporters: This is not an error message; everything may continue to work properly,
    client2-nodeexporters: in which case you may ignore this message.
==> client2-nodeexporters: Setting hostname...
==> client2-nodeexporters: Configuring and enabling network interfaces...
==> client2-nodeexporters: Rsyncing folder: /home/sincere/vagrantdocs/lesson21/vm/ => /vagrant
==> client2-nodeexporters: Running provisioner: shell...
    client2-nodeexporters: Running: inline script

PLAY [Playbook of server (prometheus) initialization] ***************************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************************************************
ok: [server-prometheus]

TASK [../roles/server : Set time zone] ******************************************************************************************************************************************
changed: [server-prometheus]

TASK [../roles/server : Update Repo url] ****************************************************************************************************************************************
changed: [server-prometheus] => (item=sudo sed -i 's/mirrorlist/#mirrorlist/g' /etc/yum.repos.d/CentOS-*.repo)
changed: [server-prometheus] => (item=sudo sed -i 's|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g' /etc/yum.repos.d/CentOS-*.repo)

TASK [../roles/server : Synchronize datetime | Install chrony] ******************************************************************************************************************
changed: [server-prometheus]

TASK [../roles/server : Synchronize datetime | Turn on chronyd] *****************************************************************************************************************
ok: [server-prometheus]

TASK [../roles/server : Create prometheus user] *********************************************************************************************************************************
changed: [server-prometheus]

TASK [../roles/server : Create new folders, set specific permission] ************************************************************************************************************
changed: [server-prometheus]

TASK [../roles/server : Copy ./prometheus to /usr/local/bin] ********************************************************************************************************************
changed: [server-prometheus]

TASK [../roles/server : Copy ./promtool to /usr/local/bin] **********************************************************************************************************************
changed: [server-prometheus]

TASK [../roles/server : Configure prometeus application | prometheus.yml] *******************************************************************************************************
changed: [server-prometheus]

TASK [../roles/server : Configure prometeus application | consoles] *************************************************************************************************************
changed: [server-prometheus]

TASK [../roles/server : Configure prometeus application | console libraries] ****************************************************************************************************
changed: [server-prometheus]

TASK [../roles/server : Configure prometeus application | consoles] *************************************************************************************************************
changed: [server-prometheus]

TASK [../roles/server : Configure prometeus service] ****************************************************************************************************************************
changed: [server-prometheus]

TASK [../roles/server : Turn on prometeus service] ******************************************************************************************************************************
changed: [server-prometheus]

TASK [../roles/server : Check http] *********************************************************************************************************************************************
ok: [server-prometheus]

TASK [../roles/server : Check http] *********************************************************************************************************************************************
skipping: [server-prometheus]

TASK [../roles/server : Create repo Grafana] ************************************************************************************************************************************
changed: [server-prometheus]

TASK [../roles/server : Install Grafana] ****************************************************************************************************************************************

PLAY [Playbook of client (node exporter) initialization] ************************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************************************************
ok: [client1-nodeexporters]
ok: [client2-nodeexporters]

TASK [../roles/client : Set time zone] ******************************************************************************************************************************************
changed: [client1-nodeexporters]
changed: [client2-nodeexporters]

TASK [../roles/client : Update Repo url from updatereposcript.sh] ***************************************************************************************************************
changed: [client1-nodeexporters]
changed: [client2-nodeexporters]

TASK [../roles/client : Synchronize datetime | Install chrony] ******************************************************************************************************************
changed: [client2-nodeexporters]
changed: [client1-nodeexporters]

TASK [../roles/client : Synchronize datetime | Turn on chronyd] *****************************************************************************************************************
ok: [client1-nodeexporters]
ok: [client2-nodeexporters]

TASK [../roles/client : Create node exporter user] ******************************************************************************************************************************
changed: [client1-nodeexporters]
changed: [client2-nodeexporters]

TASK [../roles/client : Create work paths] **************************************************************************************************************************************
changed: [client1-nodeexporters]
changed: [client2-nodeexporters]

TASK [../roles/client : Copy ./node_exporter to /usr/local/bin] *****************************************************************************************************************
changed: [client1-nodeexporters]
changed: [client2-nodeexporters]

TASK [../roles/client : Configure node exporter service] ************************************************************************************************************************
changed: [client1-nodeexporters]
changed: [client2-nodeexporters]

TASK [../roles/client : Turn on node_exporter service] **************************************************************************************************************************
changed: [client2-nodeexporters]
changed: [client1-nodeexporters]

TASK [../roles/client : Check data on client] ***********************************************************************************************************************************
ok: [client1-nodeexporters]
ok: [client2-nodeexporters]

TASK [../roles/client : Check data on client] ***********************************************************************************************************************************
skipping: [client1-nodeexporters]
skipping: [client2-nodeexporters]

TASK [../roles/client : Show data on client] ************************************************************************************************************************************
ok: [client1-nodeexporters] => {
    "msg": {
        "changed": false,
        "connection": "close",
        "content_length": "961",
        "content_type": "text/html; charset=UTF-8",
        "cookies": {},
        "cookies_string": "",
        "date": "Sun, 17 Sep 2023 15:19:11 GMT",
        "elapsed": 0,
        "failed": false,
        "msg": "OK (961 bytes)",
        "redirected": false,
        "status": 200,
        "url": "http://localhost:9100"
    }
}
ok: [client2-nodeexporters] => {
    "msg": {
        "changed": false,
        "connection": "close",
        "content_length": "961",
        "content_type": "text/html; charset=UTF-8",
        "cookies": {},
        "cookies_string": "",
        "date": "Sun, 17 Sep 2023 15:19:11 GMT",
        "elapsed": 0,
        "failed": false,
        "msg": "OK (961 bytes)",
        "redirected": false,
        "status": 200,
        "url": "http://localhost:9100"
    }
}

RUNNING HANDLER [../roles/client : systemctl daemon reload] *********************************************************************************************************************
ok: [client2-nodeexporters]
ok: [client1-nodeexporters]

PLAY RECAP **********************************************************************************************************************************************************************
client1-nodeexporters      : ok=13   changed=8    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
client2-nodeexporters      : ok=13   changed=8    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   


PLAY [Playbook of server configure after clent initialization] ******************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************************************************
ok: [server-prometheus]

TASK [../roles/updateserversnode : Register content] ****************************************************************************************************************************
changed: [server-prometheus]

TASK [../roles/updateserversnode : Update prometheus.yml] ***********************************************************************************************************************
changed: [server-prometheus]

TASK [../roles/updateserversnode : Update prometheus.yml] ***********************************************************************************************************************
changed: [server-prometheus]

RUNNING HANDLER [../roles/updateserversnode : service restart prometheus] *******************************************************************************************************
changed: [server-prometheus]

PLAY RECAP **********************************************************************************************************************************************************************
server-prometheus          : ok=5    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

